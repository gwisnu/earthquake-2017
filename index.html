<!DOCTYPE html>
<html>

<head>
  <title>Earthquakes in 2017</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
  <link rel="stylesheet" href="style.css">
  <style>
    html,
    body,
    #map {
      height: 100%;
      padding: 0;
      margin: 0;
    }
  </style>
  <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
  <!--[if lte IE 8]>
      <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.ie.css" />
    <![endif]-->
  <script type="sql/html" id="cartocss_template">
    Map { -torque-frame-count: 256; -torque-animation-duration: 23; -torque-time-attribute: "time"; -torque-aggregation-function: "count(cartodb_id)"; -torque-resolution: 5; -torque-data-aggregation: linear; } #layer { marker-width: 15; marker-fill: white;
    marker-fill-opacity: 0.9; marker-file: url(https://cartodb-libs.global.ssl.fastly.net/cartodbui/assets/unversioned/images/alphamarker.png); image-filters: colorize-alpha(#00ffd2,#00c5ff,#00ff5e,#0078ff,#00ecff,#00ff5e); } #layer[frame-offset=1] {
    marker-width: 10; marker-fill-opacity: 0.44; } #layer[frame-offset=2] { marker-width: 12; marker-fill-opacity: 0.22; } #layer[frame-offset=3] { marker-width: 14; marker-fill-opacity: 0.14666666666666667; } #layer[frame-offset=4] { marker-width: 16;
    marker-fill-opacity: 0.11; } #layer[frame-offset=5] { marker-width: 18; marker-fill-opacity: 0.088; } #layer[frame-offset=6] { marker-width: 20; marker-fill-opacity: 0.07333333333333333; } #layer[frame-offset=7] { marker-width: 22; marker-fill-opacity:
    0.06285714285714286; } #layer[frame-offset=8] { marker-width: 24; marker-fill-opacity: 0.055; } #layer[frame-offset=9] { marker-width: 26; marker-fill-opacity: 0.04888888888888889; } #layer[frame-offset=10] { marker-width: 28; marker-fill-opacity:
    0.044; } #layer[frame-offset=11] { marker-width: 30; marker-fill-opacity: 0.04; } #layer[frame-offset=12] { marker-width: 32; marker-fill-opacity: 0.03666666666666667; } #layer[frame-offset=13] { marker-width: 34; marker-fill-opacity: 0.033846153846153845;
    } #layer[frame-offset=14] { marker-width: 36; marker-fill-opacity: 0.03142857142857143; } #layer[frame-offset=15] { marker-width: 38; marker-fill-opacity: 0.029333333333333333; } #layer[frame-offset=16] { marker-width: 40; marker-fill-opacity: 0.0275;
    } #layer[frame-offset=17] { marker-width: 42; marker-fill-opacity: 0.02588235294117647; } #layer[frame-offset=18] { marker-width: 44; marker-fill-opacity: 0.024444444444444446; } #layer[frame-offset=19] { marker-width: 46; marker-fill-opacity: 0.023157894736842106;
    }
  </script>
</head>

<body>
  <div id="map"></div>
  <div id="maptitle" class="clock leaflet-control">Earthquakes in 2017</div>

  <!-- include cartodb.js library -->
  <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>

  <script>
    function main() {
      var map = new L.Map('map', {
        zoomControl: false,
        center: [-1.9964483, 113.534506],
        zoom: 5
      });
      var layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">USGS</a>&copyGunawan.wisnu,2017'
      }).addTo(map);

      cartodb.createLayer(map, {
        type: "torque",
        order: 1,
        options: {
          table_name: "earthquakes",
          user_name: "gwisnu",
          tile_style: $('#cartocss_template').html()
        }
      }).done(function(layer) {
        map.addLayer(layer);
      });
    }

    // you could use $(window).load(main);
    window.onload = main;
  </script>
</body>

</html>
